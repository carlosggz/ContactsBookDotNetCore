<app-back-to-list></app-back-to-list>
<div class="alert alert-danger" *ngIf="validations.length > 0">
    <p>Please, correct the following errors:</p>
    <ul>
        <li *ngFor="let error of validations">{{ error }}</li>
    </ul>
</div>
<div class="card p-1">
    <h5 *ngIf="!id" class="card-title m-1"> Add new contact</h5>
    <h5 *ngIf="id"  class="card-title m-1"> Edit contact</h5>
    <h6 *ngIf="id"  class="card-subtitle m-1 text-muted"> {{ id }}</h6>
    <p>&nbsp;</p>
    <form>
        <div class="container">
        <div class="row">
            <div class="form-group col-12 col-sm-12 col-md-6">
                <label for="txtFirstName">First Name</label>
                <input type="text" maxlength="50" class="form-control" id="txtFirstName" name="FirstName" placeholder="Required" [(ngModel)]="contact.firstName" required>
            </div>
            <div class="form-group col-12 col-sm-12 col-md-6">
                <label for="txtLastName">Last Name</label>
                <input type="text" maxlength="50" class="form-control" id="txtLastName" name="LastName" placeholder="Required" [(ngModel)]="contact.lastName">
            </div>
        </div>

        <div class="row mt-2">
            <div class="col-12">
                <label>Email Addresses</label>
                <button type="button" class="btn btn-link" (click)="contact.addAddress()">
                    <img src="assets/add.png" class="mb-2" alt="Add email address">
                </button>
            </div>            
        </div>
        <div class="row" *ngIf="!contact.Emails.length">
            <div class="col-12 no-items">No emails found. Click on the add button to add a new mail address.</div>            
        </div>
        <div class="row" *ngFor="let email of contact.Emails">
            <div class="col-10 col-sm-11">
                <input type="text" maxlength="100" class="form-control" placeholder="myemail@mydomain.com" [(ngModel)]="email.email" name="Email{{ email.id }}">
            </div>
            <div class="col-2 col-sm-1">
                <button type="button" class="btn btn-link" (click)="contact.removeAddress(email.id)">
                    <img src="assets/delete.png" />
                </button>
            </div>
        </div>      
        
        <div class="row mt-4">
            <div class="col-12">
                <label>Phone Numbers</label>
                <button type="button" class="btn btn-link" (click)="contact.addPhone()">
                    <img src="assets/add.png" class="mb-2" alt="Add phone number">
                </button>
            </div>            
        </div>
        <div class="row" *ngIf="!contact.Phones.length">
            <div class="col-12 no-items">No phone numbers found. Click on the add button to add a new phone number.</div>            
        </div>
        <div class="row" *ngFor="let phone of contact.Phones">
            <div class="col-6 col-sm-8">
                <input type="text" maxlength="20" class="form-control" placeholder="281-342-2452" [(ngModel)]="phone.phoneNumber" name="PhoneNumber{{ phone.id }}">
            </div>
            <div class="col-4 col-sm-3">
                <select class="form-control" name="PhoneType{{ phone.id }}" [(ngModel)]="phone.phoneType">
                    <option value="0">Home</option>
                    <option value="1">Work</option>
                    <option value="2">Mobile</option>
                </select>
            </div>    
            <div class="col-2 col-sm-1">
                <button type="button" class="btn btn-link" (click)="contact.removePhone(email.id)">
                    <img src="assets/delete.png" />
                </button>
            </div>
        </div>             
    </div>
    </form> 
    <p>&nbsp;</p>   
</div>
<p class="text-center p-3">
    <button type="button" class="btn btn-lg btn-primary" (click)="save()">
        Save Contact
    </button>
</p>
